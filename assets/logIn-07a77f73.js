import{S as v,_ as f}from"./check-bf4e5506.js";import{_ as w,r,o as b,c as y,a as n,w as h,b as s,d as k,e as x,n as d,f as I}from"./index-a13ef87b.js";import{_ as S}from"./img-2f7f45e2.js";const V={data(){return{user:{email:"",password:""},isLoading:!1,showPassword:!1}},methods:{logIn(){const c="https://todolist-sql.onrender.com/api/users/login",e={email:this.user.email,password:this.user.password};this.isLoading=!0,this.$http.post(c,e).then(t=>{const{token:a}=t.data;this.$store.dispatch("saveToken",a),this.$store.dispatch("saveUserInfo",t.data.userInfo),localStorage.setItem("token",a),localStorage.setItem("userInfo",JSON.stringify(t.data.userInfo)),this.$http.defaults.headers.common.Authorization=`Bearer ${a}`,this.isLoading=!1,t.data.userInfo.userType==="乘客"?this.$router.push("/passengerRideShare"):this.$router.push("/driverRideShare")}).catch(t=>{this.isLoading=!1;let a="";t.response.status===500&&(a="伺服器重啟中，3分鐘後重試。"),t.response.data==="operation timed out for an unknown reason"&&(a="連線逾時伺服器重啟，請重新登入。"),v.fire({title:"登入失敗",text:t.response.data||a,icon:"error",confirmButtonText:"了解"})})},goSignUp(){this.$router.push("/signUp")}}},E={class:"container pt-5"},B=s("div",{class:"loadingio-spinner-bean-eater-iylmkqp50l"},[s("div",{class:"ldio-t0eby9sr4hr"},[s("div",null,[s("div"),s("div"),s("div")]),s("div",null,[s("div"),s("div"),s("div")])])],-1),L={class:"row p-md-5"},N=s("div",{class:"col-6 me-5 d-none d-md-block"},[s("h1",{class:"f-Baloo fw-bold h2 ps-3"},[s("img",{src:f,alt:"checkbox",style:{height:"55px"}}),k(" LineBot Pick Time ")]),s("img",{src:S,class:"img-fluid",alt:"todoMan"})],-1),T={class:"col"},U=x('<h2 class="mt-5 h3 d-none d-md-block ps-2">提供共乘時間選擇服務</h2><div class="text-center d-inline d-md-none"><h1 class="f-Baloo fw-bold"><img src="'+f+'" alt="checkbox"> ONLINE TODO LIST </h1><h2 class="h5">最實用的線上待辦事項服務</h2></div>',2),C={class:"form-group pt-4"},P=s("label",{for:"Email"},"Email",-1),q={class:"form-group pt-4"},O={class:"d-flex justify-content-between align-items-center"},M=s("label",{for:"pwd"},"密碼",-1),z={class:"d-grid gap-4 col-4 mx-auto pt-5"};function K(c,e,t,a,i,l){const g=r("loading"),m=r("v-field"),p=r("ErrorMessage"),_=r("v-form");return b(),y("main",E,[n(g,{active:i.isLoading},{default:h(()=>[B]),_:1},8,["active"]),s("div",L,[N,s("div",T,[U,n(_,{class:"container"},{default:h(({errors:u})=>[s("div",C,[P,n(m,{id:"Email",name:"email",label:"Email欄位",type:"text",class:d(["form-control",{"is-invalid":u.email}]),placeholder:"請輸入Email",rules:"email|required",modelValue:i.user.email,"onUpdate:modelValue":e[0]||(e[0]=o=>i.user.email=o),style:{height:"70px"}},null,8,["class","modelValue"]),n(p,{name:"email",class:"invalid-feedback"})]),s("div",q,[s("div",O,[M,s("i",{class:d([i.showPassword?"bi-eye-slash-fill":"bi-eye-fill","me-1 fs-3 bi"]),style:{cursor:"pointer"},onClick:e[1]||(e[1]=o=>i.showPassword=!i.showPassword)},null,2)]),n(m,{id:"pwd",name:"password",type:i.showPassword?"text":"password",class:d(["form-control",{"is-invalid":u.password}]),placeholder:"請輸入密碼",rules:"required|min:6",modelValue:i.user.password,"onUpdate:modelValue":e[2]||(e[2]=o=>i.user.password=o),style:{height:"70px"}},null,8,["type","class","modelValue"]),n(p,{name:"password",class:"invalid-feedback"})]),s("div",z,[s("button",{class:"btn btn-dark py-md-3",type:"button",onKeyup:e[3]||(e[3]=I((...o)=>l.logIn&&l.logIn(...o),["enter"])),onClick:e[4]||(e[4]=(...o)=>l.logIn&&l.logIn(...o))},"登入",32),s("button",{class:"btn btn-h",type:"button",onClick:e[5]||(e[5]=(...o)=>l.goSignUp&&l.goSignUp(...o))},"註冊帳號")])]),_:1})])])])}const D=w(V,[["render",K]]);export{D as default};
