import{S as u,_ as R}from"./check-fcffe548.js";import{_ as B,m as $,r as C,o as r,c as i,a as w,w as I,b as t,d as y,t as c,g as Y,v as E,h as g,F as v,i as k,j as x,n as S,k as A}from"./index-3cbc4618.js";import{i as N,_ as O}from"./check-s-122d545e.js";const q={components:{DatePicker:N},data(){return{selectedDate:this.$moment().toDate(),startDate:this.$moment().toDate(),endDate:this.$moment().add(1,"days").toDate(),isRange:!1,reverseType:!0,formattedFareData:[],passengerFareData:[],fareCountData:[],formattedDriveData:[],driveData:[],notDriveData:[],formattedPassengerData:[],takeRideData:[],notTakeRideData:[],fareCountTotal:"",amount:null,isLoading:!1,filteredType:"當月車費",category:["當月車費","上月車費","開車登記"]}},methods:{async getFareData(){const{email:o}=this.userInfo,{token:e}=this.$store.state,d={headers:{Authorization:`Bearer ${e}`}};try{const n=await this.$http.post("https://todolist-sql.onrender.com/api/fare/get_driver_passenger_fares",{email:o},d),{found:s,currentMonthFares:l,previousMonthFares:p,passengersResult:m}=n.data;s&&(this.passengerFareData.currentMonthFares=this.formatPassengerFares(l),this.passengerFareData.previousMonthFares=this.formatPassengerFares(p),this.passengerFareData.passengersResult=m,this.filteredType==="上月車費"?this.formattedFareData=this.passengerFareData.previousMonthFares:this.filteredType==="當月車費"&&(this.formattedFareData=this.passengerFareData.currentMonthFares),this.calculateTotalFareCount())}catch(n){console.error("Error:",n)}},formatPassengerFares(o){return o.map(e=>({...e,date:this.$moment(e.date).format("YYYY-MM-DD"),fareCount:e.fareCount.map(d=>({...d,date:this.$moment(d.date).format("YYYY-MM-DD")}))}))},calculateTotalFareCount(){let o=0;this.formattedFareData&&this.formattedFareData.forEach(e=>{o+=e.fare}),o>0?this.fareCountTotal=`匯款收入${o}元`:this.fareCountTotal="尚無紀錄"},async delFareLog(o){if((await u.fire({title:"確認刪除",text:"您確定要刪除這條費用調整記錄嗎？",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#808080",confirmButtonText:"刪除",cancelButtonText:"取消"})).isConfirmed){const{token:d}=this.$store.state,n={headers:{Authorization:`Bearer ${d}`}};try{(await this.$http.delete(`https://todolist-sql.onrender.com/api/fare_count/${o}`,n)).data&&u.fire("已刪除！","您的費用調整記錄已被刪除。","success")}catch(s){console.error("刪除錯誤:",s),u.fire("錯誤","刪除過程中發生錯誤","error")}}this.getFareData()},async countFareData(){const{value:o}=await u.fire({title:"下月需付搭乘費計算",html:`
      <select id="swal-select-member" class="swal2-input">
        <option value="all">全部成員</option>
        ${this.passengerFareData.passengersResult.map(e=>`<option value="${e.line_user_name}">${e.line_user_name}</option>`).join("")}
      </select>
      <input id="swal-input-fare" type="number" class="swal2-input" placeholder="輸入您的金額" min="1">
    `,preConfirm:()=>{const e=document.getElementById("swal-select-member").value,d=document.getElementById("swal-input-fare").value;return{member:e,fare:d}}});if(o.member&&o.fare){let e="";const d=o.member,n=parseInt(o.fare);if(d==="all")this.formattedFareData.forEach(s=>{let l=n;s.fareCount.forEach(p=>{l+=p.userFareCount}),e+=`乘客:${s.name}，下月需付:NT$ ${l}<br>`});else{const s=this.formattedFareData.find(p=>p.name===d);let l=n;s.fareCount.forEach(p=>{l+=p.userFareCount}),e=`乘客:${s.name}，下月需付:NT$ ${l}<br>`}u.fire("乘客下月應付額試算",e,"warning")}else u.fire("錯誤","請輸入有效的金額","error")},async addAmount(){if(parseInt(this.amount)===NaN||this.amount===null){u.fire("錯誤","請輸入正數或負數金額","error");return}const{token:o}=this.$store.state,e={headers:{Authorization:`Bearer ${o}`}},d=this.passengerFareData.passengersResult.map(f=>`<option value="${f.line_user_id}">${f.line_user_name}</option>`).join(""),n=()=>{const f=new Date,b=new Date(f.getFullYear(),f.getMonth()-1,1),D=new Date(f.getFullYear(),f.getMonth(),0);return{minDate:b.toISOString().split("T")[0],maxDate:D.toISOString().split("T")[0]}},{minDate:s,maxDate:l}=n(),p={title:"新增搭乘費用紀錄",html:`
          <select id="swal-input1" class="swal2-input">${d}</select>
          <input id="swal-input2" class="swal2-input" placeholder="備註">
          ${this.filteredType==="上月車費"?`<input id="swal-input3" type="date" class="swal2-input" min="${s}" max="${l}">`:""}
        `,focusConfirm:!1,preConfirm:()=>{const f=document.getElementById("swal-input1"),b=f.value,D=f.options[f.selectedIndex].text,a=document.getElementById("swal-input2").value,_=this.filteredType==="上月車費"?document.getElementById("swal-input3").value:null,h=this.amount;if(!b||!a){this.filteredType==="上月車費"&&!_&&u.showValidationMessage("日期為必要項目不能為空"),u.showValidationMessage("皆為必要項目不能為空");return}return{userId:b,userName:D,userRemark:a,selectedDate:_,fareAmount:h}}},m=await u.fire(p);if(m.isConfirmed){const{userId:f,userName:b,userRemark:D,selectedDate:a,fareAmount:_}=m.value;u.fire({title:"確認信息",html:`確認將此用戶新增一筆搭乘紀錄?<br>乘客: ${b}<br>ID前五碼: ${f.slice(0,5)}<br>備註: ${D}<br>金額: NT${_}`,showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then(async h=>{if(h.isConfirmed){let M=this.$moment().format("YYYY-MM-DD HH:mm:ss");this.filteredType==="上月車費"&&(M=a);const F={userId:f,userRemark:D,fareAmount:_,date:M};try{this.isLoading=!0;const T=await this.$http.post("https://todolist-sql.onrender.com/api/fare/add_fare_count",F,e);u.fire("成功",T.data.message,"success"),this.getFareData(),this.filteredType}catch(T){u.fire("錯誤",T.response.data.message||"無法新增紀錄","error"),console.error("Error:",T)}this.isLoading=!1,this.amount=null}})}},async getDriverData(o){const{token:e}=this.$store.state,d={headers:{Authorization:`Bearer ${e}`},params:{month:"current"}};try{const n=await this.$http.get("https://todolist-sql.onrender.com/api/driver_dates",d),{drive:s,notDrive:l}=n.data;n.data&&(this.driveData=s,this.notDriveData=l,await this.formatDriveData())}catch(n){console.error("Error:",n)}},formatDriveData(){this.formattedDriveData=[],!this.driveData||this.driveData.length===0?this.formattedDriveData.push({id:null,start_date:null,end_date:null,note:"",pass_limit:null}):this.driveData.forEach(o=>{const e=this.formatDate(o.start_date),d=this.formatDate(o.end_date);this.formattedDriveData.push({id:o.id,start_date:e,end_date:d,note:o.note,pass_limit:o.pass_limit})}),this.formatNotDriveData()},formatNotDriveData(){Array.isArray(this.notDriveData)&&this.notDriveData.forEach(o=>{const e=this.formatDate(o.start_date),d=this.formatDate(o.end_date);e===d?this.formattedDriveData.push({id:o.id,start_date:e,end_date:null,note:o.note}):this.formattedDriveData.push({id:o.id,start_date:e,end_date:d,note:o.note})})},formatDate(o){const e=new Date(o),d=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${d}-${n}-${s}`},async delTakeRide(o){if((await u.fire({title:"確認刪除",text:"您確定要刪除這條登記時間記錄嗎？",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#808080",confirmButtonText:"刪除",cancelButtonText:"取消"})).isConfirmed){const{token:d}=this.$store.state,n={headers:{Authorization:`Bearer ${d}`}};try{(await this.$http.delete(`https://todolist-sql.onrender.com/api/driver_dates/${o}`,n)).data&&(u.fire("已刪除！","您的登記時間記錄已被刪除。","success"),this.getDriverData())}catch(s){console.error("刪除錯誤:",s),u.fire("錯誤","刪除過程中發生錯誤","error")}}},async getPassengerData(o){const{token:e}=this.$store.state,d={headers:{Authorization:`Bearer ${e}`},params:{month:"current"}};try{const n=await this.$http.get("https://todolist-sql.onrender.com/api/driver_passenger_dates",d);n.data&&n.data.passengerData&&(this.formattedPassengerData=n.data.passengerData.map(s=>{const l=p=>p?p.map(m=>m.start_date===m.end_date?{...m,start_date:this.$moment(m.start_date).format("YYYY-MM-DD")}:{...m,start_date:this.$moment(m.start_date).format("YYYY-MM-DD"),end_date:this.$moment(m.end_date).format("YYYY-MM-DD")}):null;return{...s,takeRide:l(s.takeRide),notTakeRide:l(s.notTakeRide)}}))}catch(n){console.error("Error:",n)}},async reserveDate(){if(this.$moment(this.startDate).format("YYYY-MM-DD")>=this.$moment(this.endDate).format("YYYY-MM-DD")||this.$moment(this.startDate).format("YYYY-MM")!==this.$moment(this.endDate).format("YYYY-MM")){u.fire("錯誤","區間規則:不允許同日、後區間小於前區間、區間需當月","warning");return}let o="",e=null;if(this.reverseType){const n=await u.fire({title:"輸入乘客數量限制",input:"number",inputPlaceholder:"請輸入數量",inputAttributes:{min:1},showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"});if(n.isConfirmed)e=n.value;else return}if(this.isRange){const n=this.$moment(this.startDate).format("YYYY/MM/DD"),s=this.$moment(this.endDate).format("YYYY/MM/DD");o=`您選擇的區間是：<br>${n} 至 ${s}<br>${e?`乘客數量為${e}`:""}<br>確認預約嗎？`}else o=`您選擇的日期是：${this.$moment(this.selectedDate).format("YYYY/MM/DD")}。確認預約嗎？`;if((await u.fire({title:"確認預約",html:o,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"})).isConfirmed){const n=await u.fire({title:"補充備註",input:"text",inputPlaceholder:"如果需要，請在這裡輸入備註...",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"不用"});if(n.isConfirmed){const{token:s}=this.$store.state;let l=n.value?n.value:null;const p={headers:{Authorization:`Bearer ${s}`}},m=this.$moment(this.isRange?this.startDate:this.selectedDate).format("YYYY-MM-DD"),f=this.isRange?this.$moment(this.endDate).format("YYYY-MM-DD"):m,b={start_date:m,end_date:f,reverse_type:this.reverseType?1:0,note:l||null,pass_limit:parseInt(e)};try{(await this.$http.post("https://todolist-sql.onrender.com/api/driver_reserve",b,p)).data&&(u.fire("預約成功！","您的預約已成功提交。","success"),await this.getDriverData())}catch(D){console.error("預約錯誤:",D),u.fire("錯誤","預約過程中發生錯誤","error")}}}},handleChangeCategory(o){this.filteredType=o},isCurrentMonth(o){const e=this.$moment().format("YYYY-MM");return o.startsWith(e)},signOut(){this.$store.dispatch("clearAuthData"),localStorage.removeItem("token");const o="https://todolist-sql.onrender.com/api/users/sign_out";this.$http.post(o).then(e=>{u.fire({title:"登出成功",text:e.data.message,icon:"success",confirmButtonText:"了解"})}).catch(e=>{u.fire({title:"登出失敗",text:e.response.data.message,icon:"error",confirmButtonText:"了解"})}),this.$router.push("/"),this.isLoading=!1}},watch:{filteredType(o){o&&(this.filteredType==="當月車費"&&(this.formattedFareData=this.passengerFareData.currentMonthFares),this.filteredType==="上月車費"&&(this.formattedFareData=this.passengerFareData.previousMonthFares),this.calculateTotalFareCount())}},computed:{...$({userInfo:"getUserInfo"}),disabledDates(){return o=>{const e=this.$moment().startOf("month"),d=this.$moment().endOf("month"),n=this.$moment(o);return!(n.isSameOrAfter(e)&&n.isSameOrBefore(d))}}},mounted(){this.getFareData(),this.getDriverData(),this.getPassengerData()}},P={class:"todo-bg pt-1"},L=t("div",{class:"loadingio-spinner-bean-eater-iylmkqp50l"},[t("div",{class:"ldio-t0eby9sr4hr"},[t("div",null,[t("div"),t("div"),t("div")]),t("div",null,[t("div"),t("div"),t("div")])])],-1),V={class:"d-none d-md-block"},j={class:"m-4 d-flex justify-content-between"},U={class:"fw-bold h2 ps-3"},z=t("img",{src:R,alt:"checkbox",style:{height:"55px"}},null,-1),H={class:"d-flex align-items-center"},G={class:"h3 pe-3"},W={class:"m-3 d-flex justify-content-between d-md-none"},J={class:"f-Baloo fw-bold pt-2 h5"},K=t("img",{src:O,alt:"checkbox"},null,-1),Q={class:"d-flex align-items-center"},X={class:"container pb-5"},Z={key:0,class:"input-group mb-3"},tt=t("span",{class:"input-group-text fs-4"},"$",-1),et={class:"input-group-text px-1 py-1 bg-white border-0",for:"todo"},st=t("i",{class:"bi bi-plus-square-fill fs-5"},null,-1),at=[st],ot={class:"card"},nt={class:"card-header bg-transparent text-center"},rt={class:"nav row mt-2"},it=["onClick"],lt={key:0,class:"card-body"},dt=t("h5",{class:"d-inline mb-3 me-3"},"開車選項:",-1),ct={class:"form-check form-check-inline mb-3"},ut=t("label",{class:"form-check-label",for:"inlineRadio3"},"開車",-1),ht={class:"form-check form-check-inline mb-3"},mt=t("label",{class:"form-check-label",for:"inlineRadio4"},"不開車",-1),ft=t("h5",{class:"d-inline mb-3 me-3"},"日期範圍:",-1),pt={class:"form-check form-check-inline mb-3"},_t=t("label",{class:"form-check-label",for:"inlineRadio2"},"單日",-1),Dt={class:"form-check form-check-inline mb-3"},bt=t("label",{class:"form-check-label",for:"inlineRadio1"},"日期區間",-1),gt={key:0},yt=t("h5",{class:"mb-3"},"選擇單日",-1),vt={key:1},kt=t("h5",{class:"mb-3"},"選擇搭乘區間",-1),Yt={class:"d-flex"},Mt=t("div",{class:"px-3"},"～",-1),Tt={class:"bg-transparent d-flex justify-content-end mt-3"},wt={class:"mt-4 ms-1 mb-0"},xt={class:"badge bg-primary p-2"},Ft={key:2},Ct={key:0,class:"list-group-item text-start border-bottom"},Rt={class:"mb-3"},Bt={key:0,class:"text-end d-block mb-3"},$t={class:"d-flex justify-content-end m-0 p-0"},It=["onClick"],Et=t("i",{class:"bi bi-x-square-fill fs-4",style:{color:"#ff0000"}},null,-1),St=[Et],At={class:"form-check-label d-block mb-2"},Nt={key:0},Ot={key:1},qt={class:"text-end d-block"},Pt={key:0},Lt={key:1},Vt={key:3,class:"list-group border-top my-4 border-3 border-secondary list-group-flush"},jt=t("ul",{class:"list-group border-top my-4 border-3 border-secondary list-group-flush"},null,-1),Ut={class:"mb-3"},zt={class:"badge bg-success p-2"},Ht={class:"my-2"},Gt={class:"badge bg-secondary p-2"},Wt={key:0},Jt=t("h5",null,"搭乘日＞",-1),Kt={class:"list-group list-group-flush"},Qt={class:"text-end"},Xt={key:1,class:"mt-3"},Zt=t("h5",null,"搭乘日＞尚無資訊",-1),te=[Zt],ee={key:2,class:"my-2"},se=t("h5",null,"不搭乘日＞",-1),ae={class:"list-group list-group-flush"},oe={class:"text-end"},ne={key:3,class:"mt-3"},re=t("h5",null,"不搭乘日＞尚無資訊",-1),ie=[re],le=t("ul",{class:"list-group border-top my-4 border-3 border-secondary list-group-flush"},null,-1),de={key:1,class:"card-body"},ce={class:"list-group-item text-start border-bottom border-danger"},ue={class:"py-2"},he={class:"form-check-label d-block text-primary"},me={class:"form-check-label d-block ps-4 py-2"},fe={key:0,class:"text-end d-block"},pe={class:"d-flex justify-content-between align-items-center"},_e=t("label",null,"費用紀錄＞",-1),De=["onClick"],be=t("i",{class:"bi bi-x-square-fill fs-4",style:{color:"#ff0000"}},null,-1),ge=[be],ye={class:"form-check-label d-block ps-4 py-2"},ve={key:0,class:"text-end d-block"},ke={class:"list-group border-top border-3 border-secondary list-group-flush"},Ye={class:"list-group-item fs-5 d-flex justify-content-between mt-2"},Me={class:"form-check-label ms-auto mt-2"},Te={key:2,class:"card-footer bg-transparent d-flex justify-content-between pt-3"},we={key:0,class:"pt-3"},xe={class:"fs-5"};function Fe(o,e,d,n,s,l){var f,b,D;const p=C("loading"),m=C("DatePicker");return r(),i("div",P,[w(p,{active:s.isLoading},{default:I(()=>[L]),_:1},8,["active"]),t("div",V,[t("header",j,[t("h1",U,[z,y(" "+c((((f=o.userInfo)==null?void 0:f.userName)??"")+" 共乘服務"),1)]),t("div",H,[t("h2",G,c(((b=o.userInfo)==null?void 0:b.userName)??""),1),t("button",{class:"btn btn-lg btn-h",onClick:e[0]||(e[0]=(...a)=>l.signOut&&l.signOut(...a))},"登出")])])]),t("header",W,[t("h1",J,[K,y(" "+c((((D=o.userInfo)==null?void 0:D.userName)??"")+" 共乘服務"),1)]),t("div",Q,[t("button",{class:"btn btn-sm btn-h",onClick:e[1]||(e[1]=(...a)=>l.signOut&&l.signOut(...a))},"登出")])]),t("main",X,[s.filteredType==="當月車費"||s.filteredType==="上月車費"?(r(),i("div",Z,[tt,Y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.amount=a),type:"number",class:"form-control border-0 py-2",placeholder:"輸入扣除金額",id:"numberInput"},null,512),[[E,s.amount,void 0,{number:!0}]]),t("label",et,[t("button",{class:"btn btn-sm",onClick:e[3]||(e[3]=(...a)=>l.addAmount&&l.addAmount(...a)),type:"button",id:"button-addon2"},at)])])):g("",!0),t("div",ot,[t("div",nt,[t("nav",rt,[(r(!0),i(v,null,k(s.category,(a,_)=>(r(),i("a",{class:S(["text-sm-center text-decoration-none col-4 py-2",{tab:s.filteredType===a}]),key:"category"+_,"aria-current":"page",href:"#",onClick:A(h=>l.handleChangeCategory(a),["prevent"])},c(a),11,it))),128))])]),s.filteredType==="開車登記"?(r(),i("div",lt,[t("div",null,[dt,t("div",ct,[Y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.reverseType=a),class:"form-check-input",type:"radio",name:"inlineRadioOptions2",id:"inlineRadio3",value:"true"},null,512),[[x,s.reverseType]]),ut]),t("div",ht,[Y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.reverseType=a),class:"form-check-input",type:"radio",name:"inlineRadioOptions2",id:"inlineRadio4",value:!1},null,512),[[x,s.reverseType]]),mt])]),t("div",null,[ft,t("div",pt,[Y(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.isRange=a),class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:!1},null,512),[[x,s.isRange]]),_t]),t("div",Dt,[Y(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.isRange=a),class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"true"},null,512),[[x,s.isRange]]),bt])]),s.isRange?(r(),i("div",vt,[kt,t("div",Yt,[w(m,{name:"startDate",type:"day",format:"YYYY/MM/DD",value:s.startDate,"onUpdate:value":e[9]||(e[9]=a=>s.startDate=a),"disabled-date":l.disabledDates},null,8,["value","disabled-date"]),Mt,w(m,{name:"endDate",type:"day",format:"YYYY/MM/DD",value:s.endDate,"onUpdate:value":e[10]||(e[10]=a=>s.endDate=a),"disabled-date":l.disabledDates},null,8,["value","disabled-date"])])])):(r(),i("div",gt,[yt,w(m,{name:"singleDate",type:"day",format:"YYYY/MM/DD",value:s.selectedDate,"onUpdate:value":e[8]||(e[8]=a=>s.selectedDate=a),"disabled-date":l.disabledDates},null,8,["value","disabled-date"])])),t("div",Tt,[t("button",{type:"button",class:"btn btn-info border-0 btn-h p-2 px-3",onClick:e[11]||(e[11]=(...a)=>l.reserveDate&&l.reserveDate(...a))},"登記")]),t("h3",wt,[t("span",xt,c(s.driveData===null&&s.notDriveData===null?"司機尚無開放預約":"司機表"),1)]),s.driveData!==null||s.notDriveData!==null?(r(),i("div",Ft,[(r(!0),i(v,null,k(s.formattedDriveData,(a,_)=>(r(),i("ul",{class:"list-group list-group-flush",key:a.id},[a.id!==null?(r(),i("li",Ct,[t("div",Rt,[a.pass_limit?(r(),i("label",Bt,[t("h5",null,c(a.pass_limit?`乘客限:${a.pass_limit}位`:""),1)])):g("",!0),t("div",$t,[t("button",{class:"btn btn",onClick:h=>l.delTakeRide(a.id),type:"button",id:"button-addon2"},St,8,It)]),t("label",At,[_===0&&a.pass_limit!==null?(r(),i("h5",Nt,"*本月開車日＞ ")):(r(),i("h5",Ot,"不開車日＞ ")),y(" 備註:"+c(a.note??"無備註"),1)]),t("label",qt,[_===0?(r(),i("span",Pt,"開車")):(r(),i("span",Lt,"不開車")),y("日期:"+c(a.start_date)+" "+c(a.end_date?`～ ${a.end_date}`:""),1)])])])):g("",!0)]))),128))])):g("",!0),s.takeRideData?g("",!0):(r(),i("ul",Vt)),jt,t("div",null,[t("h3",Ut,[t("span",zt,c(s.formattedPassengerData.length>0?"乘客搭乘表":"尚無預約"),1)]),(r(!0),i(v,null,k(s.formattedPassengerData,(a,_)=>(r(),i("div",{key:_},[t("h5",Ht,[t("span",Gt,"乘客: "+c(a.name),1)]),a.takeRide&&a.takeRide.length>0?(r(),i("div",Wt,[Jt,t("ul",Kt,[(r(!0),i(v,null,k(a.takeRide,h=>(r(),i("li",{class:"list-group-item text-start border-bottom",key:h.id},[y(" 備註: "+c(h.note??"無備註")+" ",1),t("div",Qt," 日期: "+c(h.start_date)+" ~ "+c(h.end_date),1)]))),128))])])):(r(),i("div",Xt,te)),a.notTakeRide&&a.notTakeRide.length>0?(r(),i("div",ee,[se,t("ul",ae,[(r(!0),i(v,null,k(a.notTakeRide,h=>(r(),i("li",{class:"list-group-item text-start border-bottom",key:h.id},[y(" 備註: "+c(h.note??"無備註")+" ",1),t("div",oe," 日期: "+c(h.start_date)+" ~ "+c(h.end_date),1)]))),128))])])):(r(),i("div",ne,ie)),le]))),128))])])):g("",!0),s.filteredType!=="搭乘登記"&&s.filteredType!=="開車登記"?(r(),i("div",de,[(r(!0),i(v,null,k(s.formattedFareData,(a,_)=>(r(),i("ul",{class:"list-group list-group-flush",key:a.id},[t("li",ce,[t("div",ue,[t("label",he,c(s.filteredType==="當月車費"?"本月匯款＞ ":"上月匯款＞ "),1),t("label",me,"乘客:"+c(a.name)+" 費用:"+c(a.fare),1),a.date!=="Invalid date"?(r(),i("label",fe," 紀錄日期:"+c(a.date),1)):g("",!0),(r(!0),i(v,null,k(a.fareCount,(h,M)=>(r(),i("div",{class:"py-2",key:M},[t("div",pe,[_e,t("button",{class:"btn btn",onClick:F=>l.delFareLog(h.id),type:"button",id:"button-addon2"},ge,8,De)]),t("label",ye," NT$"+c(h.userFareCount)+"，原因: "+c(h.userRemark),1),h.date?(r(),i("label",ve," 紀錄日期:"+c(this.$moment(h.date).format("YYYY-MM-DD")),1)):g("",!0)]))),128))])])]))),128)),t("ul",ke,[t("li",Ye,[t("label",Me,c(s.fareCountTotal),1)])])])):g("",!0),s.filteredType!=="搭乘登記"&&s.filteredType!=="開車登記"?(r(),i("div",Te,[s.formattedFareData?(r(),i("p",we,[t("span",xe,c(s.formattedFareData.length),1),y(" 則乘客車費紀錄")])):g("",!0),t("button",{type:"button",class:"btn btn-info my-2 border-0 btn-h",onClick:e[12]||(e[12]=(...a)=>l.countFareData&&l.countFareData(...a))},"當前紀錄計算")])):g("",!0)])])])}const $e=B(q,[["render",Fe]]);export{$e as default};
